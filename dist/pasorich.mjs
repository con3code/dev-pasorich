var img$2 = "data:image/png;base64,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";

var img$1 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABQCAYAAACOEfKtAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMbSURBVHgB7Zz/selAFMe/7837HxXYWwEdiErogA7ogFeBUQG3gkcFdBAqEBXkZd3rjon84py1Z2U/M2cmI0J8d8+PPZIAdpgkFhdYG47wG3aISvYf4Qi2BDwX7CsTVxR/YIZmYoPEut/bzYz9RceGqdcOqEaE+wGIvo//RPXPsYoW7YTiGGfL/iWmIBgFueJd7QTBIoaQLd7tTBRHADfEu1oXDHBm4R7cguV8OQUM4BYBGOAsY5qlb2g2MRgMEATBZVspBSpRFP3Yfr/HcrnE4XCociiLC3MSoiDmjMfj+HQ6xa9gsVjEyQBVycaiyBVwOBzGr2a321URURS5JxqGYWyDyWTivoBJvIttoUNGySwsjdtlmFoL/9Dr9e5eW6/XmM/nVYN9Ia1WC41GAx8fH5jNZpfkdEVvd7tdbDabvMMbENK80GedOcqr1epuZoxGIyPFsU4eaZKsX3RMG0S46sBcV7idEVd0uWGCrBnNUSoVYasfKIUWiBifgcJpgEjdBSRj3IWzYhBH9s3ieDxW+v4byANf9xgoRkDvwkS8gDVFjAvnlgNZQTwr2HOge4Jpsgr5290g8lYu/ISAZOruwmTqLqACES4BFWqKd2EiRgV85TIu77NdWcopuIlfC9vGC0jElzFEfBlD5K2ysF/KEXG5maDgJr6MsY0XkAiHgK6380mXdxgVMCuAZwV6lzHqwjYEzCqT2m3yNUS5+BhIhENABbdRIOBnIBEvIBGjWVhfeptGYBZWIODLGCLehYl4AYlw3ObwUJWq75PjJN1zfKL/p0DA+H0iabSA3CLa5OUd6XfDaBY22b5/hPO56CkrgsuYB+7dNcZ0OjVaOhmNgVq8fr+PTqdzcWcTf/AUDZDet91uYRIOAQtV0T9CiiubwHekfTfGLl5AIt6FJZcxdcC7MBEvIJFfoCPu8SFP8LQOfgYS4RDwALc5gACHgGu4zQYEOAT8hNuImAA7GHiQzgssBBGuJPIXbrKBIPRoujDrbk1BEAHcEm8CgeiTckG8EIKRLqIWT4EJjqVcFj18ubQ09L9LSzA+M/A/pHd1a8TRIUYAAAAASUVORK5CYII=";

var en$1 = {
	"pasorich.entry.name": "PaSoRich 1.0d",
	"pasorich.entry.description": "Description of this extension"
};
var ja$1 = {
	"pasorich.entry.name": "パソリッチ 1.0d",
	"pasorich.entry.description": "拡張機能の説明"
};
var translations$1 = {
	en: en$1,
	ja: ja$1,
	"ja-Hira": {
	"pasorich.entry.name": "ぱそりっち 1.0d",
	"pasorich.entry.description": "かくちょうきのうのせつめい"
}
};

/**
 * This is an extension for Xcratch.
 */

/**
 * Formatter to translate the messages in this extension.
 * This will be replaced which is used in the React component.
 * @param {object} messageData - data for format-message
 * @returns {string} - translated message for the current locale
 */
var formatMessage$1 = function formatMessage(messageData) {
  return messageData.defaultMessage;
};
var entry = {
  get name() {
    return formatMessage$1({
      id: 'pasorich.entry.name',
      default: 'PaSoRich',
      description: 'name of the extension'
    });
  },
  extensionId: 'pasorich',
  extensionURL: 'https://con3code.github.io/dev-pasorich/dist/pasorich.mjs',
  collaborator: 'con3code',
  iconURL: img$2,
  insetIconURL: img$1,
  get description() {
    return formatMessage$1({
      defaultMessage: 'an extension for Xcratch',
      description: 'Description for this extension',
      id: 'pasorich.entry.description'
    });
  },
  featured: true,
  disabled: false,
  bluetoothRequired: false,
  internetConnectionRequired: false,
  helpLink: 'https://con3.com/sc2scratch/',
  setFormatMessage: function setFormatMessage(formatter) {
    formatMessage$1 = formatter;
  },
  translationMap: translations$1
};

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {
  try {
    var info = gen[key](arg);
    var value = info.value;
  } catch (error) {
    reject(error);
    return;
  }
  if (info.done) {
    resolve(value);
  } else {
    Promise.resolve(value).then(_next, _throw);
  }
}
function _asyncToGenerator(fn) {
  return function () {
    var self = this,
      args = arguments;
    return new Promise(function (resolve, reject) {
      var gen = fn.apply(self, args);
      function _next(value) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value);
      }
      function _throw(err) {
        asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err);
      }
      _next(undefined);
    });
  };
}

function _classCallCheck(instance, Constructor) {
  if (!(instance instanceof Constructor)) {
    throw new TypeError("Cannot call a class as a function");
  }
}

function _typeof$1(o) {
  "@babel/helpers - typeof";

  return _typeof$1 = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
    return typeof o;
  } : function (o) {
    return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
  }, _typeof$1(o);
}

function _toPrimitive(input, hint) {
  if (_typeof$1(input) !== "object" || input === null) return input;
  var prim = input[Symbol.toPrimitive];
  if (prim !== undefined) {
    var res = prim.call(input, hint || "default");
    if (_typeof$1(res) !== "object") return res;
    throw new TypeError("@@toPrimitive must return a primitive value.");
  }
  return (hint === "string" ? String : Number)(input);
}

function _toPropertyKey(arg) {
  var key = _toPrimitive(arg, "string");
  return _typeof$1(key) === "symbol" ? key : String(key);
}

function _defineProperties(target, props) {
  for (var i = 0; i < props.length; i++) {
    var descriptor = props[i];
    descriptor.enumerable = descriptor.enumerable || false;
    descriptor.configurable = true;
    if ("value" in descriptor) descriptor.writable = true;
    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);
  }
}
function _createClass(Constructor, protoProps, staticProps) {
  if (protoProps) _defineProperties(Constructor.prototype, protoProps);
  if (staticProps) _defineProperties(Constructor, staticProps);
  Object.defineProperty(Constructor, "prototype", {
    writable: false
  });
  return Constructor;
}

var regeneratorRuntime$1 = {exports: {}};

var _typeof = {exports: {}};

(function (module) {
  function _typeof(o) {
    "@babel/helpers - typeof";

    return (module.exports = _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
      return typeof o;
    } : function (o) {
      return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
    }, module.exports.__esModule = true, module.exports["default"] = module.exports), _typeof(o);
  }
  module.exports = _typeof, module.exports.__esModule = true, module.exports["default"] = module.exports;
})(_typeof);

(function (module) {
  var _typeof$1 = _typeof.exports["default"];
  function _regeneratorRuntime() {

    /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
    module.exports = _regeneratorRuntime = function _regeneratorRuntime() {
      return e;
    }, module.exports.__esModule = true, module.exports["default"] = module.exports;
    var t,
      e = {},
      r = Object.prototype,
      n = r.hasOwnProperty,
      o = Object.defineProperty || function (t, e, r) {
        t[e] = r.value;
      },
      i = "function" == typeof Symbol ? Symbol : {},
      a = i.iterator || "@@iterator",
      c = i.asyncIterator || "@@asyncIterator",
      u = i.toStringTag || "@@toStringTag";
    function define(t, e, r) {
      return Object.defineProperty(t, e, {
        value: r,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }), t[e];
    }
    try {
      define({}, "");
    } catch (t) {
      define = function define(t, e, r) {
        return t[e] = r;
      };
    }
    function wrap(t, e, r, n) {
      var i = e && e.prototype instanceof Generator ? e : Generator,
        a = Object.create(i.prototype),
        c = new Context(n || []);
      return o(a, "_invoke", {
        value: makeInvokeMethod(t, r, c)
      }), a;
    }
    function tryCatch(t, e, r) {
      try {
        return {
          type: "normal",
          arg: t.call(e, r)
        };
      } catch (t) {
        return {
          type: "throw",
          arg: t
        };
      }
    }
    e.wrap = wrap;
    var h = "suspendedStart",
      l = "suspendedYield",
      f = "executing",
      s = "completed",
      y = {};
    function Generator() {}
    function GeneratorFunction() {}
    function GeneratorFunctionPrototype() {}
    var p = {};
    define(p, a, function () {
      return this;
    });
    var d = Object.getPrototypeOf,
      v = d && d(d(values([])));
    v && v !== r && n.call(v, a) && (p = v);
    var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);
    function defineIteratorMethods(t) {
      ["next", "throw", "return"].forEach(function (e) {
        define(t, e, function (t) {
          return this._invoke(e, t);
        });
      });
    }
    function AsyncIterator(t, e) {
      function invoke(r, o, i, a) {
        var c = tryCatch(t[r], t, o);
        if ("throw" !== c.type) {
          var u = c.arg,
            h = u.value;
          return h && "object" == _typeof$1(h) && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) {
            invoke("next", t, i, a);
          }, function (t) {
            invoke("throw", t, i, a);
          }) : e.resolve(h).then(function (t) {
            u.value = t, i(u);
          }, function (t) {
            return invoke("throw", t, i, a);
          });
        }
        a(c.arg);
      }
      var r;
      o(this, "_invoke", {
        value: function value(t, n) {
          function callInvokeWithMethodAndArg() {
            return new e(function (e, r) {
              invoke(t, n, e, r);
            });
          }
          return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
        }
      });
    }
    function makeInvokeMethod(e, r, n) {
      var o = h;
      return function (i, a) {
        if (o === f) throw new Error("Generator is already running");
        if (o === s) {
          if ("throw" === i) throw a;
          return {
            value: t,
            done: !0
          };
        }
        for (n.method = i, n.arg = a;;) {
          var c = n.delegate;
          if (c) {
            var u = maybeInvokeDelegate(c, n);
            if (u) {
              if (u === y) continue;
              return u;
            }
          }
          if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) {
            if (o === h) throw o = s, n.arg;
            n.dispatchException(n.arg);
          } else "return" === n.method && n.abrupt("return", n.arg);
          o = f;
          var p = tryCatch(e, r, n);
          if ("normal" === p.type) {
            if (o = n.done ? s : l, p.arg === y) continue;
            return {
              value: p.arg,
              done: n.done
            };
          }
          "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg);
        }
      };
    }
    function maybeInvokeDelegate(e, r) {
      var n = r.method,
        o = e.iterator[n];
      if (o === t) return r.delegate = null, "throw" === n && e.iterator["return"] && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y;
      var i = tryCatch(o, e.iterator, r.arg);
      if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y;
      var a = i.arg;
      return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y);
    }
    function pushTryEntry(t) {
      var e = {
        tryLoc: t[0]
      };
      1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);
    }
    function resetTryEntry(t) {
      var e = t.completion || {};
      e.type = "normal", delete e.arg, t.completion = e;
    }
    function Context(t) {
      this.tryEntries = [{
        tryLoc: "root"
      }], t.forEach(pushTryEntry, this), this.reset(!0);
    }
    function values(e) {
      if (e || "" === e) {
        var r = e[a];
        if (r) return r.call(e);
        if ("function" == typeof e.next) return e;
        if (!isNaN(e.length)) {
          var o = -1,
            i = function next() {
              for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;
              return next.value = t, next.done = !0, next;
            };
          return i.next = i;
        }
      }
      throw new TypeError(_typeof$1(e) + " is not iterable");
    }
    return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", {
      value: GeneratorFunctionPrototype,
      configurable: !0
    }), o(GeneratorFunctionPrototype, "constructor", {
      value: GeneratorFunction,
      configurable: !0
    }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) {
      var e = "function" == typeof t && t.constructor;
      return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name));
    }, e.mark = function (t) {
      return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t;
    }, e.awrap = function (t) {
      return {
        __await: t
      };
    }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {
      return this;
    }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {
      void 0 === i && (i = Promise);
      var a = new AsyncIterator(wrap(t, r, n, o), i);
      return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {
        return t.done ? t.value : a.next();
      });
    }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () {
      return this;
    }), define(g, "toString", function () {
      return "[object Generator]";
    }), e.keys = function (t) {
      var e = Object(t),
        r = [];
      for (var n in e) r.push(n);
      return r.reverse(), function next() {
        for (; r.length;) {
          var t = r.pop();
          if (t in e) return next.value = t, next.done = !1, next;
        }
        return next.done = !0, next;
      };
    }, e.values = values, Context.prototype = {
      constructor: Context,
      reset: function reset(e) {
        if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);
      },
      stop: function stop() {
        this.done = !0;
        var t = this.tryEntries[0].completion;
        if ("throw" === t.type) throw t.arg;
        return this.rval;
      },
      dispatchException: function dispatchException(e) {
        if (this.done) throw e;
        var r = this;
        function handle(n, o) {
          return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o;
        }
        for (var o = this.tryEntries.length - 1; o >= 0; --o) {
          var i = this.tryEntries[o],
            a = i.completion;
          if ("root" === i.tryLoc) return handle("end");
          if (i.tryLoc <= this.prev) {
            var c = n.call(i, "catchLoc"),
              u = n.call(i, "finallyLoc");
            if (c && u) {
              if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);
              if (this.prev < i.finallyLoc) return handle(i.finallyLoc);
            } else if (c) {
              if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);
            } else {
              if (!u) throw new Error("try statement without catch or finally");
              if (this.prev < i.finallyLoc) return handle(i.finallyLoc);
            }
          }
        }
      },
      abrupt: function abrupt(t, e) {
        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
          var o = this.tryEntries[r];
          if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
            var i = o;
            break;
          }
        }
        i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);
        var a = i ? i.completion : {};
        return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a);
      },
      complete: function complete(t, e) {
        if ("throw" === t.type) throw t.arg;
        return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y;
      },
      finish: function finish(t) {
        for (var e = this.tryEntries.length - 1; e >= 0; --e) {
          var r = this.tryEntries[e];
          if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;
        }
      },
      "catch": function _catch(t) {
        for (var e = this.tryEntries.length - 1; e >= 0; --e) {
          var r = this.tryEntries[e];
          if (r.tryLoc === t) {
            var n = r.completion;
            if ("throw" === n.type) {
              var o = n.arg;
              resetTryEntry(r);
            }
            return o;
          }
        }
        throw new Error("illegal catch attempt");
      },
      delegateYield: function delegateYield(e, r, n) {
        return this.delegate = {
          iterator: values(e),
          resultName: r,
          nextLoc: n
        }, "next" === this.method && (this.arg = t), y;
      }
    }, e;
  }
  module.exports = _regeneratorRuntime, module.exports.__esModule = true, module.exports["default"] = module.exports;
})(regeneratorRuntime$1);

// TODO(Babel 8): Remove this file.

var runtime = regeneratorRuntime$1.exports();
var regenerator = runtime;

// Copied from https://github.com/facebook/regenerator/blob/main/packages/runtime/runtime.js#L736=
try {
  regeneratorRuntime = runtime;
} catch (accidentalStrictMode) {
  if ((typeof globalThis === "undefined" ? "undefined" : _typeof$1(globalThis)) === "object") {
    globalThis.regeneratorRuntime = runtime;
  } else {
    Function("r", "regeneratorRuntime = r")(runtime);
  }
}

/**
 * Types of block
 * @enum {string}
 */
var BlockType = {
  /**
   * Boolean reporter with hexagonal shape
   */
  BOOLEAN: 'Boolean',
  /**
   * A button (not an actual block) for some special action, like making a variable
   */
  BUTTON: 'button',
  /**
   * Command block
   */
  COMMAND: 'command',
  /**
   * Specialized command block which may or may not run a child branch
   * The thread continues with the next block whether or not a child branch ran.
   */
  CONDITIONAL: 'conditional',
  /**
   * Specialized hat block with no implementation function
   * This stack only runs if the corresponding event is emitted by other code.
   */
  EVENT: 'event',
  /**
   * Hat block which conditionally starts a block stack
   */
  HAT: 'hat',
  /**
   * Specialized command block which may or may not run a child branch
   * If a child branch runs, the thread evaluates the loop block again.
   */
  LOOP: 'loop',
  /**
   * General reporter with numeric or string value
   */
  REPORTER: 'reporter'
};
var blockType = BlockType;

/**
 * Block argument types
 * @enum {string}
 */
var ArgumentType = {
  /**
   * Numeric value with angle picker
   */
  ANGLE: 'angle',
  /**
   * Boolean value with hexagonal placeholder
   */
  BOOLEAN: 'Boolean',
  /**
   * Numeric value with color picker
   */
  COLOR: 'color',
  /**
   * Numeric value with text field
   */
  NUMBER: 'number',
  /**
   * String value with text field
   */
  STRING: 'string',
  /**
   * String value with matrix field
   */
  MATRIX: 'matrix',
  /**
   * MIDI note number with note picker (piano) field
   */
  NOTE: 'note',
  /**
   * Inline image on block (as part of the label)
   */
  IMAGE: 'image'
};
var argumentType = ArgumentType;

var en = {
	"pasorich.name": "PaSoRich"
};
var ja = {
	"pasorich.name": "パソリッチ",
	"pasorich.PaSoRich": "パソリッチ",
	"pasorich.push2Connect": "押して接続",
	"pasorich.Connect": "接続",
	"pasorich.readPasori": "[DEVICE_NUMBER]番の読み取り",
	"pasorich.getIdm": "[DEVICE_NUMBER]番のIDm",
	"pasorich.getHashedIdm": "HexIDm",
	"pasorich.resetIdm": "IDmリセット",
	"pasorich.resetDevice": "デバイスリセット",
	"pasorich.whenRead": "[DEVICE_NUMBER]番が読み取られたとき",
	"pasorich.getReadingFlag": "読取中",
	"pasorich.getWaitingFlag": "待機中",
	"pasorich.readingDone": "読み取り完了",
	"pasorich.ConnectReading": "読取中...",
	"pasorich.ConnectConnected": "接続済み...",
	"pasorich.ConnectConnecting": "接続中...",
	"pasorich.ConnectSuccess": "接続成功...",
	"pasorich.ConnectFailure": "接続失敗..."
};
var translations = {
	en: en,
	ja: ja,
	"ja-Hira": {
	"pasorich.name": "ぱそりっち",
	"pasorich.PaSoRich": "ぱそりっち",
	"pasorich.push2Connect": "おしてせつぞく",
	"pasorich.Connect": "せつぞく",
	"pasorich.readPasori": "[DEVICE_NUMBER]ばんのよみとり",
	"pasorich.getIdm": "[DEVICE_NUMBER]ばんのIDm",
	"pasorich.getHashedIdm": "HexIDm",
	"pasorich.resetIdm": "IDmりせっと",
	"pasorich.resetDevice": "でばいすりせっと",
	"pasorich.whenRead": "[DEVICE_NUMBER]ばんがよみとられたとき",
	"pasorich.getReadingFlag": "よみとりちゅう",
	"pasorich.getWaitingFlag": "たいきちゅう",
	"pasorich.readingDone": "よみとりかんりょう",
	"pasorich.ConnectReading": "よみとりちゅう...",
	"pasorich.ConnectConnected": "せつぞくずみ...",
	"pasorich.ConnectConnecting": "せつぞくちゅう...",
	"pasorich.ConnectSuccess": "せつぞくせいこう...",
	"pasorich.ConnectFailure": "せつぞくしっぱい..."
}
};

var img = "data:image/png;base64,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";

function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== "undefined" && o[Symbol.iterator] || o["@@iterator"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === "number") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method."); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }
function _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === "string") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === "Object" && o.constructor) n = o.constructor.name; if (n === "Map" || n === "Set") return Array.from(o); if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }
function _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }

// Variables
var pasoriDevice = {
  443: {
    vendorId: 0x054c,
    productId: 0x01bb,
    modelType: '320',
    modelName: 'RC-S320',
    endpointInNum: '',
    endpointOutNum: ''
  },
  737: {
    vendorId: 0x054c,
    productId: 0x02e1,
    modelType: '330',
    modelName: 'RC-S330',
    endpointInNum: '',
    endpointOutNum: ''
  },
  1729: {
    vendorId: 0x054c,
    productId: 0x06C1,
    modelType: '380S',
    modelName: 'RC-S380/S',
    endpointInNum: '',
    endpointOutNum: ''
  },
  1731: {
    vendorId: 0x054c,
    productId: 0x06C3,
    modelType: '380P',
    modelName: 'RC-S380/P',
    endpointInNum: '',
    endpointOutNum: ''
  },
  3528: {
    vendorId: 0x054c,
    productId: 0x0dc8,
    modelType: '300S',
    modelName: 'RC-S300/S',
    endpointInNum: '',
    endpointOutNum: ''
  },
  3529: {
    vendorId: 0x054c,
    productId: 0x0dc9,
    modelType: '380P',
    modelName: 'RC-S300/P',
    endpointInNum: '',
    endpointOutNum: ''
  }
};
var nfcDevices = [];
var deviceOpening = false;
var seqNumber = 0;
var PaSoRichVersion = 'PaSoRich 1.5d';

/**
 * Formatter which is used for translation.
 * This will be replaced which is used in the runtime.
 * @param {object} messageData - format-message object
 * @returns {string} - message for the locale
 */
var formatMessage = function formatMessage(messageData) {
  return messageData.defaultMessage;
};

/**
 * Setup format-message for this extension.
 */
var setupTranslations = function setupTranslations() {
  var localeSetup = formatMessage.setup();
  if (localeSetup && localeSetup.translations[localeSetup.locale]) {
    Object.assign(localeSetup.translations[localeSetup.locale], translations[localeSetup.locale]);
  }
};
var EXTENSION_ID = 'pasorich';

/**
 * URL to get this extension as a module.
 * When it was loaded as a module, 'extensionURL' will be replaced a URL which is retrieved from.
 * @type {string}
 */
var extensionURL = 'https://con3code.github.io/dev-pasorich/dist/pasorich.mjs';

/**
 * Scratch 3.0 blocks for example of Xcratch.
 */
var Scratch3Pasorich = /*#__PURE__*/function () {
  /**
   * Construct a set of blocks for PaSoRich.
   * @param {Runtime} runtime - the Scratch 3.0 runtime.
   */
  function Scratch3Pasorich(runtime) {
    _classCallCheck(this, Scratch3Pasorich);
    /**
     * The Scratch 3.0 runtime.
     * @type {Runtime}
     */
    this.runtime = runtime;

    //
    this.whenReadCountMap = new Map();
    this.allHatBlocksDone_flag = false; // すべてのwhenReadハットブロックが呼ばれたかチェック用

    console.log(PaSoRichVersion);
    if (runtime.formatMessage) {
      // Replace 'formatMessage' to a formatter which is used in the runtime.
      formatMessage = runtime.formatMessage;
    }
  }
  _createClass(Scratch3Pasorich, [{
    key: "openPasori",
    value: function openPasori() {
      var _this = this;
      if (deviceOpening) {
        return;
      }
      if (nfcDevices.length > 0) {
        isConnect = formatMessage({
          id: 'pasorich.ConnectConnected',
          default: 'Connected...',
          description: 'ConnectConnected'
        });
      } else {
        isConnect = formatMessage({
          id: 'pasorich.ConnectConnecting',
          default: 'Connecting...',
          description: 'ConnectConnecting'
        });
      }
      return new Promise(function (resolve, reject) {
        deviceOpening = true;
        //console.log("openPasori:", device);

        /*
        var usbDeviceConnect = async () => {
            const usbDevice = await navigator.usb.getDevices();
        }
         usbDeviceConnect();
        */

        // 新しいデバイスをリクエストして配列に追加
        navigator.usb.requestDevice({
          filters: [{
            vendorId: 0x054c
          }]
        }).then(function (device) {
          //console.log("requestDevice:", nfcDevices);
          var existingDevice = nfcDevices.find(function (d) {
            return d && d.device.serialNumber === device.serialNumber;
          });
          //console.log("existingDevice:", existingDevice);
          if (existingDevice) {
            // デバイスがすでに存在する場合は何もせずに false を返す
            deviceOpening = false;
            resolve(false);
          } else {
            //console.log("openPasori:", device);
            addNfcDevice(device);
            _this.getDeviceNumberMenuItems();
            isConnect = formatMessage({
              id: 'pasorich.ConnectConnected',
              default: 'Connected...',
              description: 'ConnectConnected'
            });
            deviceOpening = false;
            resolve(isConnect);
          }
        }).catch(function (error) {
          deviceOpening = false;
          reject(error);
        });
        _this.getDeviceNumberMenuItems();
        resolve(isConnect);
      });
    }

    /*
    
        readPasori(args) // -> Scratch3Pasorich.prototype.readPasori
    
    */
  }, {
    key: "getIdm",
    value: function getIdm(args) {
      return getIdmNum(args.DEVICE_NUMBER);
    }
  }, {
    key: "resetIdm",
    value: function resetIdm() {
      return new Promise(function (resolve, reject) {
        if (nfcDevices.length != 0) {
          nfcDevices.forEach( /*#__PURE__*/function () {
            var _ref = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee(nfc) {
              return regenerator.wrap(function _callee$(_context) {
                while (1) switch (_context.prev = _context.next) {
                  case 0:
                    nfc.idmNum = '';
                  case 1:
                  case "end":
                    return _context.stop();
                }
              }, _callee);
            }));
            return function (_x) {
              return _ref.apply(this, arguments);
            };
          }());
          console.log("resetIdm");
          //resolve();
        }
        resolve();
      });
    }
  }, {
    key: "resetDevice",
    value: function resetDevice() {
      var _this2 = this;
      return new Promise(function (resolve, reject) {
        if (nfcDevices.length != 0) {
          nfcDevices.forEach( /*#__PURE__*/function () {
            var _ref2 = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee2(nfc) {
              var confValue, interfaceNum;
              return regenerator.wrap(function _callee2$(_context2) {
                while (1) switch (_context2.prev = _context2.next) {
                  case 0:
                    nfc.idmNum = '';
                    confValue = nfc.device.configurations[0].configurationValue || 1;
                    interfaceNum = nfc.device.configurations[0].interfaces[confValue - 1].interfaceNumber || 0;
                    _context2.next = 5;
                    return nfc.device.releaseInterface(interfaceNum);
                  case 5:
                    _context2.next = 7;
                    return nfc.device.close();
                  case 7:
                  case "end":
                    return _context2.stop();
                }
              }, _callee2);
            }));
            return function (_x2) {
              return _ref2.apply(this, arguments);
            };
          }());
          nfcDevices.splice(0, nfcDevices.length);
          _this2.getDeviceNumberMenuItems();
          console.log("resetDevices");
          //resolve();
        }
        resolve();
      });
    }

    /*
    
        whenRead(args, util) // -> Scratch3Pasorich.prototype.whenRead
    
    */

    /**
     * @returns {object} metadata for this extension and its blocks.
     */
  }, {
    key: "getInfo",
    value: function getInfo() {
      setupTranslations();
      return {
        id: Scratch3Pasorich.EXTENSION_ID,
        name: Scratch3Pasorich.EXTENSION_NAME,
        color1: '#608DD3',
        color2: '#608DD3',
        extensionURL: Scratch3Pasorich.extensionURL,
        blockIconURI: img,
        showStatusButton: false,
        blocks: [{
          opcode: 'openPasori',
          text: formatMessage({
            id: 'pasorich.Connect',
            default: 'Connect',
            description: 'openPasori'
          }),
          blockType: blockType.REPORTER
        }, '---', {
          opcode: 'readPasori',
          text: formatMessage({
            id: 'pasorich.readPasori',
            default: 'read #[DEVICE_NUMBER]reader',
            description: 'readPasori'
          }),
          blockType: blockType.COMMAND,
          arguments: {
            DEVICE_NUMBER: {
              type: argumentType.STRING,
              menu: 'deviceNumberMenu',
              defaultValue: '1' // デフォルトのデバイス番号
            }
          }
        }, {
          opcode: 'getIdm',
          text: formatMessage({
            id: 'pasorich.getIdm',
            default: 'IDm of #[DEVICE_NUMBER]',
            description: 'getIdm'
          }),
          blockType: blockType.REPORTER,
          arguments: {
            DEVICE_NUMBER: {
              type: argumentType.STRING,
              menu: 'deviceNumberMenu',
              defaultValue: '1' // デフォルトのデバイス番号
            }
          }
        }, '---', {
          opcode: 'resetIdm',
          text: formatMessage({
            id: 'pasorich.resetIdm',
            default: 'reset IDm',
            description: 'reset IDm and Variables'
          }),
          blockType: blockType.COMMAND
        }, {
          opcode: 'resetDevice',
          text: formatMessage({
            id: 'pasorich.resetDevice',
            default: 'reset Device',
            description: 'reset Devices'
          }),
          blockType: blockType.COMMAND
        }, '---', {
          opcode: 'whenRead',
          blockType: blockType.HAT,
          text: formatMessage({
            id: 'pasorich.whenRead',
            default: 'when read #[DEVICE_NUMBER]reader',
            description: 'whenRead'
          }),
          arguments: {
            DEVICE_NUMBER: {
              type: argumentType.STRING,
              menu: 'deviceNumberMenu',
              defaultValue: '1' // デフォルトのデバイス番号
            }
          }
        }],
        menus: {
          deviceNumberMenu: {
            acceptReporters: true,
            items: 'getDeviceNumberMenuItems'
          }
        }
      };
    }

    // デバイス番号メニューの項目を生成する関数
  }, {
    key: "getDeviceNumberMenuItems",
    value: function getDeviceNumberMenuItems() {
      //console.log("getDeviceNumberMenuItems:", nfcDevices.length);
      if (nfcDevices.length === 0) {
        // デバイスが登録されていない場合は空の配列を返す
        return [{
          text: ' ',
          value: ' '
        }];
      } else {
        return nfcDevices.map(function (_, index) {
          return {
            text: (index + 1).toString(),
            value: (index + 1).toString()
          };
        });
      }
    }
  }], [{
    key: "EXTENSION_NAME",
    get:
    /**
     * @return {string} - the name of this extension.
     */
    function get() {
      return formatMessage({
        id: 'pasorich.name',
        default: 'PaSoRich',
        description: 'name of the extension'
      });
    }

    /**
     * @return {string} - the ID of this extension.
     */
  }, {
    key: "EXTENSION_ID",
    get: function get() {
      return EXTENSION_ID;
    }

    /**
     * URL to get this extension.
     * @type {string}
     */
  }, {
    key: "extensionURL",
    get: function get() {
      return extensionURL;
    }

    /**
     * Set URL to get this extension.
     * The extensionURL will be changed to the URL of the loading server.
     * @param {string} url - URL
     */,
    set: function set(url) {
      extensionURL = url;
    }
  }]);
  return Scratch3Pasorich;
}();
var AsyncQueue = /*#__PURE__*/function () {
  function AsyncQueue() {
    _classCallCheck(this, AsyncQueue);
    this.queue = [];
    this.pendingPromise = false;
  }
  _createClass(AsyncQueue, [{
    key: "enqueue",
    value: function () {
      var _enqueue = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee3(task) {
        var _this3 = this;
        return regenerator.wrap(function _callee3$(_context3) {
          while (1) switch (_context3.prev = _context3.next) {
            case 0:
              return _context3.abrupt("return", new Promise(function (resolve, reject) {
                _this3.queue.push(function () {
                  return task().then(resolve).catch(reject);
                });
                if (!_this3.pendingPromise) {
                  _this3.pendingPromise = true;
                  _this3.dequeue();
                }
              }));
            case 1:
            case "end":
              return _context3.stop();
          }
        }, _callee3);
      }));
      function enqueue(_x3) {
        return _enqueue.apply(this, arguments);
      }
      return enqueue;
    }()
  }, {
    key: "dequeue",
    value: function () {
      var _dequeue = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee4() {
        var task;
        return regenerator.wrap(function _callee4$(_context4) {
          while (1) switch (_context4.prev = _context4.next) {
            case 0:
              if (!(this.queue.length === 0)) {
                _context4.next = 3;
                break;
              }
              this.pendingPromise = false;
              return _context4.abrupt("return");
            case 3:
              task = this.queue.shift();
              _context4.prev = 4;
              _context4.next = 7;
              return task();
            case 7:
              _context4.next = 12;
              break;
            case 9:
              _context4.prev = 9;
              _context4.t0 = _context4["catch"](4);
              console.error('Error during async task execution:', _context4.t0);
            case 12:
              _context4.prev = 12;
              this.dequeue();
              return _context4.finish(12);
            case 15:
            case "end":
              return _context4.stop();
          }
        }, _callee4, this, [[4, 9, 12, 15]]);
      }));
      function dequeue() {
        return _dequeue.apply(this, arguments);
      }
      return dequeue;
    }()
  }]);
  return AsyncQueue;
}();
var isConnect = formatMessage({
  id: 'pasorich.push2Connect',
  default: 'Push to Connect.',
  description: 'push2Connect'
});
var getEndpoint = function getEndpoint(argInterface, argValue) {
  var retValue = false;
  var _iterator = _createForOfIteratorHelper(argInterface.alternate.endpoints),
    _step;
  try {
    for (_iterator.s(); !(_step = _iterator.n()).done;) {
      var val = _step.value;
      if (val.direction == argValue && val.type == 'bulk') {
        console.log(val);
        retValue = val;
      }
    }
  } catch (err) {
    _iterator.e(err);
  } finally {
    _iterator.f();
  }
  return retValue;
};
function setupDevice(_x4) {
  return _setupDevice.apply(this, arguments);
} // キューインスタンスを作成
function _setupDevice() {
  _setupDevice = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee5(device) {
    var modelType, confValue, interfaceNum, deviceEndpoint, pasoriDeviceModel;
    return regenerator.wrap(function _callee5$(_context5) {
      while (1) switch (_context5.prev = _context5.next) {
        case 0:
          modelType = device.productId;
          console.log("setupDevice:", device);
          confValue = device.configurations[0].configurationValue || 1;
          console.log("configurationValue:", confValue);
          interfaceNum = device.configurations[0].interfaces[0].interfaceNumber || 0; // インターフェイス番号
          console.log("interfaceNumber:", interfaceNum);
          deviceEndpoint = getEndpoint(device.configurations[0].interfaces[0], 'in');
          pasoriDeviceModel = pasoriDevice[modelType];
          pasoriDeviceModel.endPointInNum = deviceEndpoint.endpointNumber;
          console.log("endpointInNumber:", pasoriDeviceModel.endPointInNum);
          //console.log("endpointInNumber:", deviceEndpoint.endpointNumber);
          deviceEndpoint = getEndpoint(device.configurations[0].interfaces[0], 'out');
          pasoriDeviceModel.endPointOutNum = deviceEndpoint.endpointNumber;
          console.log("endpointOutNumber:", pasoriDeviceModel.endPointOutNum);
          //console.log("endpointOutNumber:", deviceEndpoint.endpointNumber);
          _context5.prev = 13;
          _context5.next = 16;
          return device.open();
        case 16:
          _context5.next = 18;
          return device.selectConfiguration(confValue);
        case 18:
          _context5.next = 20;
          return device.claimInterface(interfaceNum);
        case 20:
          _context5.next = 25;
          break;
        case 22:
          _context5.prev = 22;
          _context5.t0 = _context5["catch"](13);
          console.error('This device is currently in use or down:', _context5.t0);
        case 25:
          return _context5.abrupt("return", device);
        case 26:
        case "end":
          return _context5.stop();
      }
    }, _callee5, null, [[13, 22]]);
  }));
  return _setupDevice.apply(this, arguments);
}
var readPasoriQueue = new AsyncQueue();

// 実際のreadPasoriの処理を行う関数
Scratch3Pasorich.prototype.readPasoriTask = function (args) {
  var _this4 = this;
  return new Promise(function (resolve, reject) {
    //console.log("readPasoriTask:", args.DEVICE_NUMBER);
    //if (args.DEVICE_NUMBER === '') { resolve('No Device'); }

    var deviceNumber = parseInt(args.DEVICE_NUMBER, 10);
    if (deviceNumber > 0 && deviceNumber <= nfcDevices.length) {
      var device = getNfcDeviceByNumber(deviceNumber);
      //console.log("readOpenPasori:", device);
      if (device) {
        if (device.opened) {
          // デバイスが既に開かれている場合は、直接 session 処理を行う
          session(device).then(resolve).catch(reject);
        } else {
          // デバイスが開かれていない場合は、セットアップを行う
          setupDevice(device).then(function () {
            return session(device);
          }).then(resolve).catch(function (error) {
            console.error('Failed to setup or session the device:', error);
            reject(error);
          });
        }
      } else {
        console.error('Invalid device number');
        reject('Invalid device');
      }
    } else {
      // 新しいデバイスをリクエストして配列に追加する
      navigator.usb.requestDevice({
        filters: [{
          vendorId: 0x054c
        }]
      }).then(function (device) {
        //console.log("requestDevice:", nfcDevices);
        var existingDevice = nfcDevices.find(function (d) {
          return d && d.device.serialNumber === device.serialNumber;
        });
        //console.log("existingDevice:", existingDevice);
        if (existingDevice) ; else {
          //console.log("readSetPasori:", device);
          addNfcDevice(device);
          _this4.getDeviceNumberMenuItems();
          isConnect = formatMessage({
            id: 'pasorich.ConnectConnected',
            default: 'Connected...',
            description: 'ConnectConnected'
          });
          //deviceOpening = false;
        }
      }).then(function () {
        var device = getNfcDeviceByNumber(deviceNumber);
        //console.log("readOpenPasori:", device);
        if (device) {
          if (device.opened) {
            // デバイスが既に開かれている場合は、直接 session 処理を行う
            session(device).then(resolve).catch(reject);
          } else {
            // デバイスが開かれていない場合は、セットアップを行う
            setupDevice(device).then(function () {
              return session(device);
            }).then(resolve).catch(function (error) {
              console.error('Failed to setup or session the device:', error);
              reject(error);
            });
          }
        } else {
          console.error('Invalid device number');
          reject('Invalid device');
        }
      }).catch(function (error) {
        deviceOpening = false;
        reject(error);
      });
      _this4.getDeviceNumberMenuItems();
    }
  }).then(function () {
    _this4.pasoriReadCallback(args.DEVICE_NUMBER);
  });
};

// readPasori関数でpasoriReadCallbackを呼び出し
Scratch3Pasorich.prototype.readPasori = function (args) {
  var _this5 = this;
  return readPasoriQueue.enqueue(function () {
    //console.log("readPasori:", args.DEVICE_NUMBER);
    //this.pasoriReadCallback(args.DEVICE_NUMBER);
    return _this5.readPasoriTask(args);
  });
};
Scratch3Pasorich.prototype.pasoriReadCallback = function (deviceNo) {
  var _this6 = this;
  this.whenReadCountMap.forEach(function (readList, blockId) {
    // readListが配列でない場合は新しい配列を割り当てる
    if (!Array.isArray(readList)) {
      readList = [];
      _this6.whenReadCountMap.set(blockId, readList);
    }
    readList.push(deviceNo);
  });
};

// whenReadCalled関数で、readList配列を参照し、deviceNoを確認
Scratch3Pasorich.prototype.whenReadCalled = function (blockId, deviceNo) {
  var readList = this.whenReadCountMap.get(blockId) || [];
  if (readList.length > 0) {
    // deviceNoがreadListの先頭にある場合、それを削除
    var deviceNumber = readList[0];
    readList.shift();
    this.whenReadCountMap.set(blockId, readList);
    return deviceNumber === deviceNo;
  } else {
    this.whenReadCountMap.set(blockId, readList);
    //console.log("whenReadCalled:", readList);
  }
  return false;
};

// whenRead関数で、whenReadCalledの戻り値を利用
Scratch3Pasorich.prototype.whenRead = function (args, util) {
  var blockId = util.thread.topBlock;
  var deviceNumber = args.DEVICE_NUMBER;
  //console.log("whenRead:", deviceNumber);
  return this.whenReadCalled(blockId, deviceNumber);
};
function send300(_x5, _x6, _x7) {
  return _send.apply(this, arguments);
}
function _send() {
  _send = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee6(device, endpointOut, data) {
    var uint8data, dataLen, SLOTNUMBER, retVal;
    return regenerator.wrap(function _callee6$(_context6) {
      while (1) switch (_context6.prev = _context6.next) {
        case 0:
          uint8data = new Uint8Array(data);
          dataLen = uint8data.length;
          SLOTNUMBER = 0x00;
          retVal = new Uint8Array(10 + dataLen);
          retVal[0] = 0x6b; // ヘッダー作成
          retVal[1] = 255 & dataLen; // length をリトルエンディアン
          retVal[2] = dataLen >> 8 & 255;
          retVal[3] = dataLen >> 16 & 255;
          retVal[4] = dataLen >> 24 & 255;
          retVal[5] = SLOTNUMBER; // タイムスロット番号
          retVal[6] = ++seqNumber; // 認識番号

          0 != dataLen && retVal.set(uint8data, 10); // コマンド追加
          console.log(">>>>>>>>>>");
          console.log(Array.from(retVal).map(function (v) {
            return v.toString(16);
          }));
          _context6.next = 16;
          return device.transferOut(endpointOut, retVal);
        case 16:
          _context6.next = 18;
          return sleep(50);
        case 18:
        case "end":
          return _context6.stop();
      }
    }, _callee6);
  }));
  return _send.apply(this, arguments);
}
function send(_x8, _x9, _x10) {
  return _send2.apply(this, arguments);
}
function _send2() {
  _send2 = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee7(device, endpointOut, data) {
    var uint8data;
    return regenerator.wrap(function _callee7$(_context7) {
      while (1) switch (_context7.prev = _context7.next) {
        case 0:
          uint8data = new Uint8Array(data);
          _context7.next = 3;
          return device.transferOut(endpointOut, uint8data);
        case 3:
          _context7.next = 5;
          return sleep(10);
        case 5:
        case "end":
          return _context7.stop();
      }
    }, _callee7);
  }));
  return _send2.apply(this, arguments);
}
function receive(_x11, _x12, _x13) {
  return _receive.apply(this, arguments);
}
function _receive() {
  _receive = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee8(device, endpointIn, len) {
    var data, arr, i;
    return regenerator.wrap(function _callee8$(_context8) {
      while (1) switch (_context8.prev = _context8.next) {
        case 0:
          _context8.next = 2;
          return device.transferIn(endpointIn, len);
        case 2:
          data = _context8.sent;
          _context8.next = 5;
          return sleep(10);
        case 5:
          arr = [];
          for (i = data.data.byteOffset; i < data.data.byteLength; i++) {
            arr.push(data.data.getUint8(i));
          }
          return _context8.abrupt("return", arr);
        case 8:
        case "end":
          return _context8.stop();
      }
    }, _callee8);
  }));
  return _receive.apply(this, arguments);
}
function session(_x14) {
  return _session.apply(this, arguments);
} // 特定のデバイスのidmNumを取得する関数
function _session() {
  _session = _asyncToGenerator( /*#__PURE__*/regenerator.mark(function _callee9(device) {
    var pasoriDeviceModel, endpointOut, endpointIn, len, poling_res_f, idm, idmStr, idmNum, _idm, _idmStr, i, _idmNum;
    return regenerator.wrap(function _callee9$(_context9) {
      while (1) switch (_context9.prev = _context9.next) {
        case 0:
          //console.log("session IN");

          console.log("session:", device.productId);
          pasoriDeviceModel = pasoriDevice[device.productId];
          endpointOut = pasoriDeviceModel.endPointOutNum; //console.log("session_endPointOutNum:", pasoriDeviceModel.endPointOutNum);
          endpointIn = pasoriDeviceModel.endPointInNum; //console.log("session_endPointInNum:", pasoriDeviceModel.endPointInNum);
          // RC-S300
          if (!(device.productId === 0x0dc8 || device.productId === 0x0dc9)) {
            _context9.next = 41;
            break;
          }
          console.log("RC-S300");
          len = 50; //endpointOut = 0;
          //endpointIn = 0;
          console.log("session_endPointOutNum:", endpointOut);
          console.log("session_endPointInNum:", endpointIn);

          //await send300(device, endpointOut, [0xFF, 0x56, 0x00, 0x00]);
          //await receive(device, endpointIn, len);

          // endtransparent
          _context9.next = 11;
          return send300(device, endpointOut, [0xFF, 0x50, 0x00, 0x00, 0x02, 0x82, 0x00, 0x00]);
        case 11:
          _context9.next = 13;
          return receive(device, endpointIn, len);
        case 13:
          _context9.next = 15;
          return send300(device, endpointOut, [0xFF, 0x50, 0x00, 0x00, 0x02, 0x81, 0x00, 0x00]);
        case 15:
          _context9.next = 17;
          return receive(device, endpointIn, len);
        case 17:
          _context9.next = 19;
          return send300(device, endpointOut, [0xFF, 0x50, 0x00, 0x00, 0x02, 0x83, 0x00, 0x00]);
        case 19:
          _context9.next = 21;
          return receive(device, endpointIn, len);
        case 21:
          _context9.next = 23;
          return send300(device, endpointOut, [0xFF, 0x50, 0x00, 0x00, 0x02, 0x84, 0x00, 0x00]);
        case 23:
          _context9.next = 25;
          return receive(device, endpointIn, len);
        case 25:
          _context9.next = 27;
          return send300(device, endpointOut, [0xff, 0x50, 0x00, 0x02, 0x04, 0x8f, 0x02, 0x03, 0x00, 0x00]);
        case 27:
          _context9.next = 29;
          return receive(device, endpointIn, len);
        case 29:
          _context9.next = 31;
          return send300(device, endpointOut, [0xFF, 0x50, 0x00, 0x01, 0x00, 0x00, 0x11, 0x5F, 0x46, 0x04, 0xA0, 0x86, 0x01, 0x00, 0x95, 0x82, 0x00, 0x06, 0x06, 0x00, 0xFF, 0xFF, 0x01, 0x00, 0x00, 0x00, 0x00]);
        case 31:
          _context9.next = 33;
          return receive(device, endpointIn, len);
        case 33:
          poling_res_f = _context9.sent;
          if (!(poling_res_f.length == 46)) {
            _context9.next = 41;
            break;
          }
          idm = poling_res_f.slice(26, 34).map(function (v) {
            return dec2HexString(v);
          });
          idmStr = idm.join(' ');
          idmNum = JSON.parse(JSON.stringify(idmStr));
          _context9.next = 40;
          return setIdmNum(device, idmNum);
        case 40:
          return _context9.abrupt("return");
        case 41:
          if (!(device.productId === 0x06C1 || device.productId === 0x06C3)) {
            _context9.next = 100;
            break;
          }
          console.log("RC-S380");
          console.log("session_endPointOutNum:", endpointOut);
          console.log("session_endPointInNum:", endpointIn);
          _context9.next = 47;
          return send(device, endpointOut, [0x00, 0x00, 0xff, 0x00, 0xff, 0x00]);
        case 47:
          _context9.next = 49;
          return send(device, endpointOut, [0x00, 0x00, 0xff, 0xff, 0xff, 0x03, 0x00, 0xfd, 0xd6, 0x2a, 0x01, 0xff, 0x00]);
        case 49:
          _context9.next = 51;
          return receive(device, endpointIn, 6);
        case 51:
          _context9.next = 53;
          return receive(device, endpointIn, 13);
        case 53:
          _context9.next = 55;
          return send(device, endpointOut, [0x00, 0x00, 0xff, 0xff, 0xff, 0x03, 0x00, 0xfd, 0xd6, 0x06, 0x00, 0x24, 0x00]);
        case 55:
          _context9.next = 57;
          return receive(device, endpointIn, 6);
        case 57:
          _context9.next = 59;
          return receive(device, endpointIn, 13);
        case 59:
          _context9.next = 61;
          return send(device, endpointOut, [0x00, 0x00, 0xff, 0xff, 0xff, 0x03, 0x00, 0xfd, 0xd6, 0x06, 0x00, 0x24, 0x00]);
        case 61:
          _context9.next = 63;
          return receive(device, endpointIn, 6);
        case 63:
          _context9.next = 65;
          return receive(device, endpointIn, 13);
        case 65:
          _context9.next = 67;
          return send(device, endpointOut, [0x00, 0x00, 0xff, 0xff, 0xff, 0x06, 0x00, 0xfa, 0xd6, 0x00, 0x01, 0x01, 0x0f, 0x01, 0x18, 0x00]);
        case 67:
          _context9.next = 69;
          return receive(device, endpointIn, 6);
        case 69:
          _context9.next = 71;
          return receive(device, endpointIn, 13);
        case 71:
          _context9.next = 73;
          return send(device, endpointOut, [0x00, 0x00, 0xff, 0xff, 0xff, 0x28, 0x00, 0xd8, 0xd6, 0x02, 0x00, 0x18, 0x01, 0x01, 0x02, 0x01, 0x03, 0x00, 0x04, 0x00, 0x05, 0x00, 0x06, 0x00, 0x07, 0x08, 0x08, 0x00, 0x09, 0x00, 0x0a, 0x00, 0x0b, 0x00, 0x0c, 0x00, 0x0e, 0x04, 0x0f, 0x00, 0x10, 0x00, 0x11, 0x00, 0x12, 0x00, 0x13, 0x06, 0x4b, 0x00]);
        case 73:
          _context9.next = 75;
          return receive(device, endpointIn, 6);
        case 75:
          _context9.next = 77;
          return receive(device, endpointIn, 13);
        case 77:
          _context9.next = 79;
          return send(device, endpointOut, [0x00, 0x00, 0xff, 0xff, 0xff, 0x04, 0x00, 0xfc, 0xd6, 0x02, 0x00, 0x18, 0x10, 0x00]);
        case 79:
          _context9.next = 81;
          return receive(device, endpointIn, 6);
        case 81:
          _context9.next = 83;
          return receive(device, endpointIn, 13);
        case 83:
          _context9.next = 85;
          return send(device, endpointOut, [0x00, 0x00, 0xff, 0xff, 0xff, 0x0a, 0x00, 0xf6, 0xd6, 0x04, 0x6e, 0x00, 0x06, 0x00, 0xff, 0xff, 0x01, 0x00, 0xb3, 0x00]);
        case 85:
          _context9.next = 87;
          return receive(device, endpointIn, 6);
        case 87:
          _context9.next = 89;
          return receive(device, endpointIn, 37);
        case 89:
          _idm = _context9.sent.slice(17, 25);
          if (!(_idm.length > 0)) {
            _context9.next = 98;
            break;
          }
          _idmStr = '';
          for (i = 0; i < _idm.length; i++) {
            if (_idm[i] < 16) {
              _idmStr += '0';
            }
            _idmStr += _idm[i].toString(16);
          }
          _idmNum = JSON.parse(JSON.stringify(_idmStr));
          _context9.next = 96;
          return setIdmNum(device, _idmNum);
        case 96:
          _context9.next = 100;
          break;
        case 98:
          _context9.next = 100;
          return setIdmNum(device, '');
        case 100:
        case "end":
          return _context9.stop();
      }
    }, _callee9);
  }));
  return _session.apply(this, arguments);
}
function getIdmNum(deviceNumber) {
  //console.log("getIdmNum:", deviceNumber);
  if (deviceNumber > 0 && deviceNumber <= nfcDevices.length) {
    //console.log("getIdmNumNfc:", nfcDevices);
    return nfcDevices[deviceNumber - 1].idmNum;
  }
  return null; // 範囲外の場合はnullを返す
}

// 特定のデバイスのidmNumを設定する関数
function setIdmNum(device, idmNum) {
  var deviceIndex = nfcDevices.findIndex(function (d) {
    return d.device && d.device.serialNumber === device.serialNumber;
  });
  console.log("IDm #", deviceIndex + 1, ": ", idmNum);
  //console.log("setIdmIdx:", deviceIndex);
  if (deviceIndex !== -1) {
    nfcDevices[deviceIndex].idmNum = idmNum;
  }
}
function addNfcDevice(device) {
  if (device instanceof USBDevice) {
    // 通常のデバイスを追加する処理
    var existingDevice = nfcDevices.find(function (d) {
      return d && d.serialNumber === device.serialNumber;
    });
    if (existingDevice) {
      // デバイスがすでに存在する場合は何もせずに false を返す
      return false;
    }
    // デバイスとそれに関連するidmNumをオブジェクトとして配列に追加
    nfcDevices.push({
      device: device,
      idmNum: ''
    });
    return true;
  } else {
    console.error('The provided object is not a USBDevice instance.');
  }
}

// デバイスを取得する関数（番号で取得）
function getNfcDeviceByNumber(deviceNumber) {
  if (deviceNumber > 0 && deviceNumber <= nfcDevices.length) {
    // deviceNumber は配列のインデックスとして機能
    return nfcDevices[deviceNumber - 1].device;
  }
}
function sleep(msec) {
  return new Promise(function (resolve) {
    return setTimeout(function () {
      resolve();
    }, msec);
  });
}

export { Scratch3Pasorich as blockClass, entry };
